<script>
    if (!Array.prototype.lastItem) {
        Array.prototype.lastItem = function () {
            return this[this.length - 1];
        };
    };

    if (!Array.prototype.sum) {
        Array.prototype.sum = function () {
            return this.reduce((a, b) => a + b, 0);
        };
    };

    function round(number, numOfDigits) {
        var coef = Math.pow(10, numOfDigits);
        return (Math.round(number * coef)/coef).toFixed(numOfDigits);
    }

    function getDateFromTimestamp(unix_timestamp) {
        // Create a new JavaScript Date object based on the timestamp
        // multiplied by 1000 so that the argument is in milliseconds, not seconds.
        var date = new Date(unix_timestamp * 1000);
        var day = "0" + date.getDay();
        var month = "0" + (date.getMonth() + 1);
        var year = "0" + date.getFullYear();

        // Will display time in 10:30:23 format
        return day.substr(-2) + '.' + month.substr(-2) + '.' + year.substr(-4);
    }

    function makePost(route, dataObject, isAsync, onSuccess, onError) {
        $.ajax({
            type: "POST",
            url: route,
            data: dataObject,
            dataType: "text",
            async: isAsync,
            success: function (data, textStatus, jqXHR) {
                if (onSuccess) {
                    onSuccess(data, jqXHR);
                }
            },
            error: function (jqXHR, textStatus, errorThrown) {
                if (onError) {
                    onError();
                }
            }
        });
    }

    function makeRequest(route, requestType, onLoaded) {
        var xhr = new XMLHttpRequest();
        xhr.onreadystatechange = function () {
            if (this.readyState == 4 && this.status == 200) {
                onLoaded(this.responseText);
            }
        };
        xhr.open(requestType, route);
        xhr.send();
    }
</script>